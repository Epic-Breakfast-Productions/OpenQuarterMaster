{!{@java.util.List<tech.ebp.oqm.baseStation.model.rest.externalItemLookup.ExtItemLookupProviderInfo> productProviderInfoList}!}
{!{@java.util.List<tech.ebp.oqm.baseStation.model.rest.externalItemLookup.ExtItemLookupProviderInfo> supportedPageScanInfoList}!}
{!{@java.util.List<tech.ebp.oqm.baseStation.model.rest.externalItemLookup.ExtItemLookupProviderInfo> legoProviderInfoList}!}
{#include webui/mainWebPageTemplate showTitle = true navbar = 'full' title = "Help and User Guide" page = 'help'}
    {#pageStyle}

    {/pageStyle}
    {#pageContent}
        <ul class="nav nav-tabs" id="mainTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="generalTab" data-bs-toggle="tab" data-bs-target="#generalTabContent"
                        type="button" role="tab" aria-controls="generalTabContent" aria-selected="true">
                    General
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="itemsTab" data-bs-toggle="tab"
                        data-bs-target="#itemsContent" type="button" role="tab"
                        aria-controls="itemsContent" aria-selected="false">
                    {#icons/items}{/icons/items} Items
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="unitsTab" data-bs-toggle="tab"
                        data-bs-target="#unitsContent" type="button" role="tab"
                        aria-controls="unitsContent" aria-selected="false">
                    Units
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="itemListsTab" data-bs-toggle="tab"
                        data-bs-target="#itemListsContent" type="button" role="tab"
                        aria-controls="itemListsContent" aria-selected="false">Item Lists
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="apiTab" data-bs-toggle="tab"
                        data-bs-target="#apiContent" type="button" role="tab"
                        aria-controls="apiContent" aria-selected="false">
                    API
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="itemSearchProvidersTab" data-bs-toggle="tab"
                        data-bs-target="#itemSearchProvidersContent" type="button" role="tab"
                        aria-controls="itemSearchProvidersContent" aria-selected="false">Search Providers
                </button>
            </li>
        </ul>
        <div class="tab-content" id="mainTabContent">
            <div class="tab-pane fade show active" id="generalTabContent" role="tabpanel" aria-labelledby="generalTab">
                {! TODO:: this !}
                TODO
            </div>
            <div class="tab-pane fade" id="itemsContent" role="tabpanel" aria-labelledby="itemsTab">
                <h2>
                    {#icons/items}{/icons/items} Items
                </h2>
                <p>
                    Items are... what's stored! Items are tracked on the {#links/inventoryItems}{/links/inventoryItems} page.
                </p>
                <h3>Storage Types</h3>
                <p>
                    There are may ways to track and store items. We facilitate this by giving you several options of types of storage:
                </p>
                <h4>Amount Based</h4>
                <h5>Bulk</h5>
                <p>
                    This is meant to specify bulk items, like bolts, mulch, or other things that aren't separated by anything.
                    Bulk items only have one stored object associated for each storage block.
                </p>
                <h5>Amount List</h5>
                <p>
                    This is meant to specify a wider array of items. It can be used to keep track of different amounts of things
                    in one storage block, separated by condition or other attribute. It can also be used to specify different items
                    that are identified by the amount of stuff they are, such as fresh packaged food.
                </p>
                <h4>Unique</h4>
                <p>
                    Unique items are meant to express items that are uniquely identified. These items don't have an amount associated
                    with them, and are counted individually.
                </p>
                <h5>Unique - Multi</h5>
                <p>
                    This iteration of item allows for many unique items to be stored. Examples could be anything with a serial number,
                    or otherwise uniquely identified.
                </p>
                <h5>Unique - Single</h5>
                <p>
                    This only allows a single unique item to be stored. It supports multiple blocks to be associated, just only one stored item
                    between them. Examples could include your favorite guitar, a special tool, or momento.
                </p>
            </div>
            <div class="tab-pane fade" id="unitsContent" role="tabpanel" aria-labelledby="unitsTab">
                <h2>
                    Units
                </h2>
                <p>
                    This describes what units are available to use in this system. An inventory administrator can add
                    additional units.
                </p>
                {#for curCategory in unitCategoryMap.fields()}
                    <hr/>
                    <h4>
                        {curCategory.getKey()}
                    </h4>
                    <ul>
                        {#for curUnit in curCategory.getValue()}
                            <li>
                                {curUnit.get("name").asText()} - ( <code>#</code>{curUnit.get("symbol").asText()} )
                            </li>
                        {/for}
                    </ul>
                {/for}
            </div>
            <div class="tab-pane fade" id="itemSearchProvidersContent" role="tabpanel"
                 aria-labelledby="itemSearchProvidersTab">
                <h2>
                    Item Search Providers
                </h2>
                <p>
                    This describes the external services supported by Open QuarterMaster to help read in data about
                    items.
                </p>
                <p>
                    For information on enabling/ configuring these providers, see <a
                            href="https://github.com/Epic-Breakfast-Productions/OpenQuarterMaster/blob/main/software/open-qm-base-station/docs/BuildingAndDeployment.adoc#product-search-providers">our
                        documentation on Github</a>
                </p>
                {#if extSearchEnabled}
                    <hr/>
                    <h3>
                        Products
                    </h3>
                    <p>
                        Services to search for Products by UPC/Barcode
                    </p>
                    <div class="row">
                        {#for productProvider in allProviderInfo.get("product")}
                            {#providerInfoCard providerInfo = productProvider}
                            {/providerInfoCard}
                        {/for}
                    </div>
                    <hr/>
                    <h3>
                        Websites
                    </h3>
                    <p>
                        These websites are supported to glean data from. The intent is for you to enter a specific
                        product's page.
                    </p>
                    <div class="row">
                        {#for productProvider in allProviderInfo.get("webpage")}
                            {#providerInfoCard providerInfo = productProvider}
                            {/providerInfoCard}
                        {/for}
                    </div>
                    <hr/>
                    <h3>
                        Lego
                    </h3>
                    <p>
                        This describes the external services to search for Lego(tm) bricks.
                    </p>
                    <div class="row">
                        {#for productProvider in allProviderInfo.get("lego")}
                            {#providerInfoCard providerInfo = productProvider}
                            {/providerInfoCard}
                        {/for}
                    </div>
                {#else}
                    <div class="alert alert-warning" role="alert">
                        This feature is not currently enabled. Enable it by installing the External Item Search plugin.
                    </div>
                {/if}
            </div>
            <div class="tab-pane fade" id="itemListsContent" role="tabpanel" aria-labelledby="itemListsTab">
                <h2>
                    Item Lists
                </h2>
                <p>
                    TODO
                </p>
                <hr/>

            </div>
            <div class="tab-pane fade" id="apiContent" role="tabpanel" aria-labelledby="apiTab">
                <h2>
                    Rest API
                </h2>
                <p>
                    Full documentation of all endpoints is available at the <a
                            href="{config:['oqm.core.api.baseUri']}" target="_blank">Core API</a>.
                </p>
                <hr/>
                TODO::
                - explain logging in through api (show relevant steps for SELF or EXTERNAL auth modes)

            </div>
        </div>
    {/pageContent}
    {#pageScript}
        <script>
            const itemsTab = document.getElementById("itemsTab");

            if ($(location).attr('hash') === "#items") {
                itemsTab.click();
            }
        </script>
    {/pageScript}
{/include}