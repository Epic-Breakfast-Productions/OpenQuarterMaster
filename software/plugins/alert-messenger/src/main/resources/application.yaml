
quarkus:
  log:
    level: DEBUG
    category:
      "io.quarkus.mailer":
        level: DEBUG
  oidc:
    application-type: WEB_APP
    token-state-manager: 
      encryption-secret: "7Ko5m4wII/c8iJxWeNQRIwJ1AIaE5XVfTsA8oiI5Z4IAMrGa24wfuZRiCa6nTELZ"
      split-tokens: true
  oqmCoreApi:
    devservice:
      enableKafka: true
      coreApiVersion: 2.1.3-DEV
      certPath: ../../../../dev/devTest-cert-cert.pem
      certKeyPath: ../../../../dev/devTest-cert-key.pem
  keycloak:
    devservices:
      # Required to export realm
      start-command: "start-dev --http-enabled=true --hostname-strict=false --https-certificate-file=/opt/keycloak/certs/devTest-cert-cert.pem --https-certificate-key-file=/opt/keycloak/certs/devTest-cert-key.pem"
      realm-path: "../../../../dev/oqm-realm.json"
      realm-name: "oqm"
      resource-aliases:
        systemCert: ../../../../dev/devTest-cert-cert.pem
        systemCertKey: ../../../../dev/devTest-cert-key.pem
      resource-mappings:
        systemCert: /opt/keycloak/certs/devTest-cert-cert.pem
        systemCertKey: /opt/keycloak/certs/devTest-cert-key.pem
  # Mailer configuration for Gmail SMTP server.
  # Configures the SMTP server for sending email notifications.
  mailer:
    auth-methods: "DIGEST-MD5 CRAM-SHA256 CRAM-SHA1 CRAM-MD5 PLAIN LOGIN"
    from: "oqm.alert.messenger@gmail.com"
    host: "smtp.gmail.com"
    port: 587
    ssl: false
    start-tls: REQUIRED
    username: "${SMTP_USERNAME}"
    password: "${SMTP_PASSWORD}"
    mock: false

  # Database configuration below (for user credentials and preferences).
  # Configures the PostgreSQL database for storing user information and preferences.
  datasource:
    db-kind: postgresql
    jdbc:
      url: jdbc:postgresql://localhost:5432/oqm_db
    username: ${DB_USERNAME:defaultUsername}
    password: ${DB_PASSWORD:defaultPassword}
  hibernate-orm:
    database:
      generation: update

mp:
  messaging:
    incoming:
      oqm-core-all-events:
        connector: smallrye-kafka
        auto:
          offset:
            reset: earliest
#        value:
#          deserializer: tech.ebp.oqm.plugin.alertMessenger.ObjectNodeDeserializer

smallrye:
  jwt:
    always-check-authorization: true
    require-scope: false


"%dev":
  quarkus:
    http:
      port: 8080
      ssl-port: 8443
      ssl:
        certificate:
          files: ../../../../dev/devTest-cert-cert.pem
          key-files: ../../../../dev/devTest-cert-key.pem
    oidc:
      client-id: oqm-app
      credentials:
        secret: "**********"
  mp:
    messaging:
      incoming:
        oqm-core-all-events:
          bootstrap:
            servers: ${devservice.kafka.bootstrapServers}
  kafka:
    bootstrap:
      servers: ${devservice.kafka.bootstrapServers}