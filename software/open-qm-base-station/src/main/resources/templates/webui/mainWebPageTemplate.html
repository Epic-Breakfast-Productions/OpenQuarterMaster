{@com.ebp.openQuarterMaster.lib.core.rest.user.UserGetResponse userInfo}

{! @com.gjs.taskTimekeeper.webServer.server.config.ServerInfoBean serverInfo !}
{!
Main webpage template

Ingests:
- page - Required if showing navbar.
- title - parameter in include, the title of the page
- styleSheets - inserted value, extra references to style sheets
- pageStyle - inserted value, extra page-specific css
- pageContent - inserted value, the content of the page
- scripts - inserted value, extra references to js scripts
- pageScript - inserted value, extra page-specific scripts
- showNavbar* - parameter in include, shows the navbar or not
!}
<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="shortcut icon" href="/favicon.ico"/>
    <title>{#if title??}{title} - {/if}{config:['service.nameFull']}</title>

    <!-- CSS -->
    <link rel="stylesheet" href="/res/css/bootstrap-adjust.css">
    <link href="/lib/bootstrap/bootstrap-5.1.3-dist/bootswatch.litera.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/lib/fontawesome-free-5.15.4-web/css/all.css">
    <link rel="stylesheet" href="/lib/spin.js/spin.css">
    <link rel="stylesheet" href="/res/css/main.css">
    {#insert styleSheets}{/}
    {!
    {#if styleSheets??}
    {#for styleSheet in styleSheets}
    <link rel="stylesheet" href="{styleSheet}">
    {/for}
    {/if}
    !}

    <style>
	{#insert pageStyle}/* No page css */{/}


    </style>
</head>
<body>
<span id="pageInfo" data-page-initted="false" data-auth-type="{config:['service.authMode']}"></span>

<!-- nav here -->

{#if showNavbar}
{! https://stackoverflow.com/questions/19733447/bootstrap-navbar-with-left-center-or-right-aligned-items !}
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
        <a class="navbar-brand" href="/overview">
            <img src="/media/logo.png" alt="" width="24" height="24">
        </a>
        <a class="navbar-brand" href="/overview">{config:['service.nameShort']}</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarColor03"
                aria-controls="navbarColor03" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarColor03">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link {#if page is 'overview'}active{/if}" href="/overview">
                        <i class="fas fa-tachometer-alt"></i> Overview
                        {#if page is 'overview'}
                        <span class="visually-hidden">(current)</span>
                        {/if}
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {#if page is 'storage'}active{/if}" href="/storage">
                        <i class="fas fa-boxes"></i> Storage
                        {#if page is 'storage'}
                        <span class="visually-hidden">(current)</span>
                        {/if}
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {#if page is 'items'}active{/if}" href="/items"><i
                            class="fas fa-balance-scale"></i> Items
                        {#if page is 'items'}
                        <span class="visually-hidden">(current)</span>
                        {/if}
                    </a>
                </li>
                <!--                <li class="nav-item dropdown">-->
                <!--                    <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button"-->
                <!--                       aria-haspopup="true" aria-expanded="false">Dropdown</a>-->
                <!--                    <div class="dropdown-menu">-->
                <!--                        <a class="dropdown-item" href="#">Action</a>-->
                <!--                        <a class="dropdown-item" href="#">Another action</a>-->
                <!--                        <a class="dropdown-item" href="#">Something else here</a>-->
                <!--                        <div class="dropdown-divider"></div>-->
                <!--                        <a class="dropdown-item" href="#">Separated link</a>-->
                <!--                    </div>-->
                <!--                </li>-->
            </ul>

            <form class="d-flex me-auto" method="get" action="/items">
                <input class="form-control me-sm-2" type="text" placeholder="Search Items" name="name">
                <button class="btn btn-secondary my-2 my-sm-0" type="submit">Search</button>
            </form>
            <ul class="d-flex navbar-nav me-auto">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button"
                       aria-haspopup="true" aria-expanded="false">{userInfo.getUsername()}</a>
                    <div class="dropdown-menu">
                        <!--                        <a class="dropdown-item" href="#">Action</a>-->
                        <!--                        <a class="dropdown-item" href="#">Another action</a>-->
                        <!--                        <a class="dropdown-item" href="#">Something else here</a>-->
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#" id="logoutButton">Logout</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>
{/if}
<div id="mainContainer" class="container">
    {#if showTitle}
    <h1>{#if titleIcon??}<i class="fas fa-{titleIcon}"></i> {/if}{title}</h1>
    <hr/>
    {/if}
    <div id="messageDiv">

    </div>

    <main role="main">
        {#insert pageContent}<h1>No body!</h1>{/}
    </main>

    <hr/>
    <footer id="footer" class="row" role="contentinfo">
        <div class="col-sm-4">
            <h2 class="footer-header">Open Quarter Master Server</h2>
            <p>
                &copy; 2021 <a href="https://gjstewart.net" target="_blank">Greg Stewart</a><br/>
                Released under the <a href="https://opensource.org/licenses/Apache-2.0" target="_blank">Apache 2.0
                License</a><br/>
                <a href="https://github.com/GregJohnStewart/task-timekeeper" target="_blank">Github</a><br/>
            </p>
        </div>
        <div id="serverInfo" class="col-sm-4">
            <h2 class="footer-header">
                Run by:<br/>
                me
            </h2>
            <h2>
                Contact information:
            </h2>
        </div>
        <div class="col-sm-4">
            <p>
                Your privacy is important to the original project. It only creates one cookie, and that is for the login
                token.
                The project also only collects what you give it, and it is up to the people running the server to ensure
                it is handled
                well. Please contact the folks running the server for more information.
            </p>
            <!-- TODO:: legal disclaimer, etc. -->
        </div>
    </footer>
</div>
<!-- Modals -->
{#insert modals}{/}

<!-- scripts -->
<script src="/lib/jquery-3.6.0/jquery.min.js"></script>
<script src="/lib/bootstrap/bootstrap-5.1.3-dist/js/bootstrap.bundle.min.js"></script>
<script src="/lib/js-cookie-3.0.1/js.cookie.min.js"></script>
<script src="/lib/spin.js/spin.umd.js"></script>
<script src="/res/js/spinnerHelpers.js"></script>
<script src="/res/js/pageMessages.js"></script>
<script src="/res/js/rest.js"></script>
<script src="/res/js/login.js"></script>
<script src="/res/js/main.js"></script>
{#insert scripts}{/}
{!
{#if styleSheets??}
{#for script in scripts}
<script src="{script}"></script>
{/for}
{/if}
!}

<script>
{#insert pageScript}{/}
</script>

</body>
</html>